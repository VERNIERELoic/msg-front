<app-header></app-header>
<h1 class="title">Mon compte</h1>
<form nz-form [formGroup]="validateForm">
    <nz-upload class="avatar-uploader" nzAction="https://www.mocky.io/v2/5cc8019d300000980a055e76" nzName="avatar"
        nzListType="picture-card" [nzShowUploadList]="false" [nzBeforeUpload]="beforeUpload"
        (nzChange)="handleChange($event)">
        <ng-container *ngIf="!avatarUrl">
            <span class="upload-icon" nz-icon [nzType]="loading ? 'loading' : 'plus'"></span>
            <div class="ant-upload-text">Photo</div>
        </ng-container>
        <img *ngIf="avatarUrl" [src]="avatarUrl" style="width: 100%" />
    </nz-upload>
    <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="email">E-mail</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Email invalide!">
            <input nz-input formControlName="email" id="email" />
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="password">Mot de passe</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input your password!">
            <input nz-input type="password" id="password" formControlName="password"
                (ngModelChange)="updateConfirmValidator()" />
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="checkPassword">Confirmer</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="errorTpl">
            <input nz-input type="password" formControlName="checkPassword" id="checkPassword" />
            <ng-template #errorTpl let-control>
                <ng-container *ngIf="control.hasError('required')">Veuillez confirmer le mot de passe!</ng-container>
                <ng-container *ngIf="control.hasError('confirm')">
                    Les deux mots de passe ne correspondent pas!
                </ng-container>
            </ng-template>
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="nickname">
            <span>Prénom</span>
        </nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
            <input nz-input id="nickname" formControlName="name" />
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="phone">Téléphone</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" [nzValidateStatus]="validateForm.controls['phone']"
            nzErrorTip="Please input your phone number!">

            <input formControlName="phone" id="'phone'" nz-input />

        </nz-form-control>
    </nz-form-item>
    <nz-form-item nz-row class="register-area">
        <nz-form-control [nzSpan]="14" [nzOffset]="6">
            <button nz-button nzType="primary" type="submit" (click)="updateUser()">modifier</button>
        </nz-form-control>
    </nz-form-item>
    <app-footer></app-footer>